<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIP DASHBOARD - GODSPOWER</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <style>
        body { background-color: #0d0d0d; color: #00ff00; font-family: 'Courier New', monospace; padding: 20px; }
        h1 { text-align: center; border-bottom: 2px solid #00ff00; padding-bottom: 10px; }
        .container { max-width: 900px; margin: 0 auto; }
        .card { border: 1px solid #333; padding: 20px; margin-bottom: 20px; border-radius: 8px; background: #111; }
        
        /* SIGNAL BOX ANIMATION */
        .signal-box { font-size: 2em; font-weight: bold; text-align: center; padding: 30px; border: 3px solid #333; color: #555; transition: 0.3s; }
        .signal-active { border-color: #00ff00; color: #00ff00; box-shadow: 0 0 30px #00ff00; animation: pulse 1s infinite; }
        .signal-sell { border-color: #ff0000; color: #ff0000; box-shadow: 0 0 30px #ff0000; animation: pulse 1s infinite; }
        
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }
        
        #log { height: 200px; overflow-y: scroll; border: 1px solid #333; padding: 10px; font-size: 0.85em; color: #aaa; background: #000; }
        .log-entry { border-bottom: 1px solid #222; padding: 5px 0; }
        .buy { color: #00ff00; } .sell { color: #ff0044; }
    </style>
</head>
<body>

    <div class="container">
        <h1>üîê VIP ADMIN DASHBOARD</h1>
        
        <div class="card">
            <div id="signal-display" class="signal-box">SCANNING MARKET...</div>
        </div>

        <div class="card">
            <h3>üìà LIVE MARKET FEED</h3>
            <canvas id="priceChart"></canvas>
        </div>

        <div class="card">
            <h3>üìù SIGNAL LOGS</h3>
            <div id="log"></div>
        </div>
    </div>

    <script>
        const socket = io();
        const ctx = document.getElementById('priceChart').getContext('2d');
        const signalDisplay = document.getElementById('signal-display');
        const logDiv = document.getElementById('log');

        // SETUP CHART
        const chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [{
                    label: 'EUR/USD (Simulated)',
                    data: [],
                    borderColor: '#00ff00',
                    backgroundColor: 'rgba(0, 255, 0, 0.1)',
                    borderWidth: 2,
                    pointRadius: 0,
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                scales: {
                    x: { display: false },
                    y: { grid: { color: '#222' } }
                },
                animation: false
            }
        });

        // LISTEN FOR MARKET DATA
        socket.on('market-update', (data) => {
            if (chart.data.labels.length > 50) {
                chart.data.labels.shift();
                chart.data.datasets[0].data.shift();
            }
            chart.data.labels.push(data.candle.time);
            chart.data.datasets[0].data.push(data.candle.close);
            chart.update();
        });

        // LISTEN FOR BUY/SELL SIGNALS
        socket.on('new-signal', (data) => {
            const isBuy = data.type.includes('CALL');
            
            // Update Big Box
            signalDisplay.innerHTML = `${data.type}<br><span style="font-size:0.5em">PRICE: ${data.price.toFixed(5)}</span>`;
            signalDisplay.className = isBuy ? 'signal-box signal-active' : 'signal-box signal-sell';

            // Add to History Log
            const p = document.createElement('div');
            p.className = `log-entry ${isBuy ? 'buy' : 'sell'}`;
            p.innerHTML = `[${data.time}] <b>${data.type}</b> @ ${data.price.toFixed(5)}`;
            logDiv.prepend(p);

            // Play Sound (Optional)
            // const audio = new Audio(isBuy ? 'buy_sound.mp3' : 'sell_sound.mp3');
            // audio.play();
        });
    </script>
</body>
</html>