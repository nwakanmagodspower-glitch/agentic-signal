<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGENTIC AI // LIVE SIGNALS</title>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700;800&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #00ff41; --glow: rgba(0, 255, 65, 0.5); --dark: #050505; --red: #ff003c; }
        
        body { 
            margin: 0; background: #000; color: #fff; font-family: 'Rajdhani', sans-serif; 
            min-height: 100vh; overflow-x: hidden;
            display: flex; flex-direction: column; align-items: center;
        }

        /* ANIMATED BACKGROUND */
        .video-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            object-fit: cover; opacity: 0.3; filter: blur(5px); z-index: -1;
        }

        /* --- LOCK SCREEN (The Cyber Glass UI) --- */
        #lock-screen {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 100vh; width: 100%;
            transition: opacity 0.5s ease;
        }

        .glass-panel {
            background: rgba(10, 15, 10, 0.75); backdrop-filter: blur(15px);
            border: 1px solid rgba(0, 255, 65, 0.3); box-shadow: 0 0 40px var(--glow);
            padding: 40px; width: 90%; max-width: 450px; border-radius: 12px; text-align: center;
        }

        .status-dot { height: 10px; width: 10px; background: var(--primary); border-radius: 50%; display: inline-block; box-shadow: 0 0 10px var(--primary); animation: pulse 1s infinite; }
        h1 { font-family: 'Share Tech Mono', monospace; font-size: 2.5rem; margin: 10px 0; text-shadow: 0 0 20px var(--primary); line-height: 1; }
        
        /* PRICING GRID */
        .pricing-grid { display: flex; gap: 10px; margin-bottom: 30px; margin-top: 20px;}
        .price-card { 
            background: rgba(255,255,255,0.05); border: 1px solid #333; padding: 10px; flex: 1; border-radius: 5px; 
        }
        .price-title { font-size: 0.8rem; color: #888; display: block; }
        .price-amount { font-size: 1.2rem; font-weight: 800; color: #fff; display: block; }

        /* DEPOSIT BUTTON */
        .btn-main {
            background: linear-gradient(180deg, #00ff41, #008f11); color: #000; border: none;
            padding: 15px; width: 100%; font-size: 1.2rem; font-weight: 800; text-transform: uppercase;
            border-radius: 6px; box-shadow: 0 0 25px var(--glow); cursor: pointer; transition: 0.3s;
        }
        .btn-main:hover { transform: scale(1.02); box-shadow: 0 0 50px var(--primary); }

        /* --- DASHBOARD (Hidden initially) --- */
        #dashboard { display: none; width: 100%; max-width: 600px; padding: 20px; box-sizing: border-box; }
        
        .dash-header { 
            display: flex; justify-content: space-between; align-items: center; 
            background: rgba(0,0,0,0.8); padding: 15px; border-radius: 10px; border: 1px solid #333; margin-bottom: 20px;
        }
        .tier-badge { padding: 5px 15px; border-radius: 20px; font-family: 'Share Tech Mono'; font-weight: bold; font-size: 14px; background: #333; border: 1px solid #555; }
        .tier-1 { color: #fff; } 
        .tier-2 { color: #ffd700; border-color: #ffd700; } 
        .tier-3 { background: var(--primary); color: #000; box-shadow: 0 0 10px var(--primary); }

        /* SIGNAL CARDS */
        .signal-card { 
            background: rgba(20, 20, 20, 0.9); border-left: 5px solid #555; 
            padding: 20px; margin-bottom: 15px; border-radius: 8px; position: relative; overflow: hidden;
            animation: slideIn 0.5s ease;
        }
        .signal-card.call { border-left-color: var(--primary); }
        .signal-card.put { border-left-color: var(--red); }
        
        .signal-header { display: flex; justify-content: space-between; font-size: 1.2rem; font-weight: bold; }
        .decision { font-size: 2rem; font-weight: 800; margin: 10px 0; text-shadow: 0 0 10px rgba(0,0,0,0.5); }
        .call .decision { color: var(--primary); }
        .put .decision { color: var(--red); }

        /* BLUR OVERLAY FOR LOCKED TIERS */
        .blur-overlay { 
            position: absolute; top:0; left:0; width:100%; height:100%; 
            background: rgba(0,0,0,0.8); backdrop-filter: blur(8px);
            display: flex; align-items: center; justify-content: center; flex-direction: column; z-index: 10; 
        }

        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
        @keyframes slideIn { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
    
    <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
    <script>
      window.OneSignal = window.OneSignal || [];
      OneSignal.push(function() {
        OneSignal.init({ appId: "<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGENTIC AI // LIVE SIGNALS</title>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700;800&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #00ff41; --glow: rgba(0, 255, 65, 0.5); --dark: #050505; --red: #ff003c; }
        
        body { 
            margin: 0; background: #000; color: #fff; font-family: 'Rajdhani', sans-serif; 
            min-height: 100vh; overflow-x: hidden;
            display: flex; flex-direction: column; align-items: center;
        }

        /* ANIMATED BACKGROUND */
        .video-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            object-fit: cover; opacity: 0.3; filter: blur(5px); z-index: -1;
        }

        /* --- LOCK SCREEN (The Cyber Glass UI) --- */
        #lock-screen {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            height: 100vh; width: 100%;
            transition: opacity 0.5s ease;
        }

        .glass-panel {
            background: rgba(10, 15, 10, 0.75); backdrop-filter: blur(15px);
            border: 1px solid rgba(0, 255, 65, 0.3); box-shadow: 0 0 40px var(--glow);
            padding: 40px; width: 90%; max-width: 450px; border-radius: 12px; text-align: center;
        }

        .status-dot { height: 10px; width: 10px; background: var(--primary); border-radius: 50%; display: inline-block; box-shadow: 0 0 10px var(--primary); animation: pulse 1s infinite; }
        h1 { font-family: 'Share Tech Mono', monospace; font-size: 2.5rem; margin: 10px 0; text-shadow: 0 0 20px var(--primary); line-height: 1; }
        
        /* PRICING GRID */
        .pricing-grid { display: flex; gap: 10px; margin-bottom: 30px; margin-top: 20px;}
        .price-card { 
            background: rgba(255,255,255,0.05); border: 1px solid #333; padding: 10px; flex: 1; border-radius: 5px; 
        }
        .price-title { font-size: 0.8rem; color: #888; display: block; }
        .price-amount { font-size: 1.2rem; font-weight: 800; color: #fff; display: block; }

        /* DEPOSIT BUTTON */
        .btn-main {
            background: linear-gradient(180deg, #00ff41, #008f11); color: #000; border: none;
            padding: 15px; width: 100%; font-size: 1.2rem; font-weight: 800; text-transform: uppercase;
            border-radius: 6px; box-shadow: 0 0 25px var(--glow); cursor: pointer; transition: 0.3s;
        }
        .btn-main:hover { transform: scale(1.02); box-shadow: 0 0 50px var(--primary); }

        /* --- DASHBOARD (Hidden initially) --- */
        #dashboard { display: none; width: 100%; max-width: 600px; padding: 20px; box-sizing: border-box; }
        
        .dash-header { 
            display: flex; justify-content: space-between; align-items: center; 
            background: rgba(0,0,0,0.8); padding: 15px; border-radius: 10px; border: 1px solid #333; margin-bottom: 20px;
        }
        .tier-badge { padding: 5px 15px; border-radius: 20px; font-family: 'Share Tech Mono'; font-weight: bold; font-size: 14px; background: #333; border: 1px solid #555; }
        .tier-1 { color: #fff; } 
        .tier-2 { color: #ffd700; border-color: #ffd700; } 
        .tier-3 { background: var(--primary); color: #000; box-shadow: 0 0 10px var(--primary); }

        /* SIGNAL CARDS */
        .signal-card { 
            background: rgba(20, 20, 20, 0.9); border-left: 5px solid #555; 
            padding: 20px; margin-bottom: 15px; border-radius: 8px; position: relative; overflow: hidden;
            animation: slideIn 0.5s ease;
        }
        .signal-card.call { border-left-color: var(--primary); }
        .signal-card.put { border-left-color: var(--red); }
        
        .signal-header { display: flex; justify-content: space-between; font-size: 1.2rem; font-weight: bold; }
        .decision { font-size: 2rem; font-weight: 800; margin: 10px 0; text-shadow: 0 0 10px rgba(0,0,0,0.5); }
        .call .decision { color: var(--primary); }
        .put .decision { color: var(--red); }

        /* BLUR OVERLAY FOR LOCKED TIERS */
        .blur-overlay { 
            position: absolute; top:0; left:0; width:100%; height:100%; 
            background: rgba(0,0,0,0.8); backdrop-filter: blur(8px);
            display: flex; align-items: center; justify-content: center; flex-direction: column; z-index: 10; 
        }

        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
        @keyframes slideIn { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
    
    <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
    <script>
      window.OneSignal = window.OneSignal || [];
      OneSignal.push(function() {
        OneSignal.init({ appId: "YOUR_ONESIGNAL_APP_ID" }); // REPLACE THIS
      });
    </script>
</head>
<body>

    <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExYnJ2ZmV3bnZ5cWJ6eXJ6eXJ6eXJ6eXJ6eXJ6eXJ6eXJ6eXJ6eCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/L1R1TVThqcebPqF8M/giphy.gif" class="video-bg" alt="bg">

    <div id="lock-screen">
        <div class="glass-panel">
            <div><span class="status-dot"></span> SYSTEM ONLINE</div>
            <h1>AGENTIC AI</h1>
            <p style="color:#aaa; letter-spacing:1px; margin-bottom: 20px;">INSTITUTIONAL SIGNAL ALGORITHM</p>

            <div class="pricing-grid">
                <div class="price-card">
                    <span class="price-title">BASIC</span>
                    <span class="price-amount">$20</span>
                </div>
                <div class="price-card">
                    <span class="price-title">PRO</span>
                    <span class="price-amount">$99</span>
                </div>
                <div class="price-card">
                    <span class="price-title">VIP</span>
                    <span class="price-amount">$500</span>
                </div>
            </div>

            <button class="btn-main" onclick="register()">
                âš¡ DEPOSIT TO UNLOCK
            </button>

            <div style="margin-top:20px; font-size:0.8rem; color:#666;">
                SECURE CONNECTION â€¢ 256-BIT ENCRYPTED
            </div>
        </div>
    </div>

    <div id="dashboard">
        <div class="dash-header">
            <span style="font-weight:bold; color:#fff;">ðŸ”´ LIVE FEED</span>
            <div id="my-tier" class="tier-badge tier-1">TIER 0 (LOCKED)</div>
        </div>
        <div id="feed"></div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        
        // 1. User Identity (Stored in Browser)
        let userId = localStorage.getItem('u_id');
        if(!userId) {
            userId = 'user_' + Math.floor(Math.random() * 1000000);
            localStorage.setItem('u_id', userId);
        }

        let currentTier = 0; 

        // 2. Register Button Logic (Generates Link)
        async function register() {
            const btn = document.querySelector('.btn-main');
            btn.innerText = "GENERATING LINK...";
            
            try {
                const res = await fetch(`/generate-link?userId=${userId}`);
                const data = await res.json();
                window.open(data.link, '_blank');
                btn.innerText = "WAITING FOR DEPOSIT...";
            } catch(e) {
                alert("Error connecting to server.");
                btn.innerText = "TRY AGAIN";
            }
        }

        // 3. Listen for Unlock/Tier Update
        socket.on('account_unlocked', (data) => { updateTier(data.tier, data.message); });
        socket.on('tier_update', (data) => { updateTier(data.tier, "Tier Updated!"); });

        function updateTier(tier, msg) {
            currentTier = tier;
            // Hide Lock Screen, Show Dashboard
            document.getElementById('lock-screen').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
            
            // Update Badge
            const badge = document.getElementById('my-tier');
            badge.innerText = "TIER " + currentTier;
            badge.className = "tier-badge tier-" + currentTier;
            
            alert("ðŸ”“ " + msg);
        }

        // 4. Receive Signals
        socket.on('new_signal', (data) => {
            // If user is still on lock screen, do nothing visually
            const feed = document.getElementById('feed');
            const div = document.createElement('div');
            
            const isCall = data.decision.includes('CALL') || data.decision.includes('Buy');
            const isLocked = data.tierRequired > currentTier;
            
            div.className = `signal-card ${isCall ? 'call' : 'put'}`;
            
            div.innerHTML = `
                ${isLocked ? `<div class="blur-overlay"><span>ðŸ”’ VIP SIGNAL</span><small style="color:#aaa">Requires Tier ${data.tierRequired}</small></div>` : ''}
                
                <div class="signal-header">
                    <span>${data.pair}</span>
                    <span style="font-size:0.9rem; opacity:0.7">${data.timestamp}</span>
                </div>
                
                <div class="decision">${data.decision}</div>
                
                <div style="display:flex; justify-content:space-between; font-size:0.9rem; color:#ccc;">
                    <span>Entry: ${data.price}</span>
                    <span>RSI: ${data.rsi}</span>
                </div>
            `;
            
            feed.prepend(div);
            // Keep feed clean (max 10 signals)
            if(feed.children.length > 10) feed.lastChild.remove();
        });
    </script>
</body>
</html>" }); // REPLACE THIS
      });
    </script>
</head>
<body>

    <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExYnJ2ZmV3bnZ5cWJ6eXJ6eXJ6eXJ6eXJ6eXJ6eXJ6eXJ6eXJ6eCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/L1R1TVThqcebPqF8M/giphy.gif" class="video-bg" alt="bg">

    <div id="lock-screen">
        <div class="glass-panel">
            <div><span class="status-dot"></span> SYSTEM ONLINE</div>
            <h1>AGENTIC AI</h1>
            <p style="color:#aaa; letter-spacing:1px; margin-bottom: 20px;">INSTITUTIONAL SIGNAL ALGORITHM</p>

            <div class="pricing-grid">
                <div class="price-card">
                    <span class="price-title">BASIC</span>
                    <span class="price-amount">$20</span>
                </div>
                <div class="price-card">
                    <span class="price-title">PRO</span>
                    <span class="price-amount">$99</span>
                </div>
                <div class="price-card">
                    <span class="price-title">VIP</span>
                    <span class="price-amount">$500</span>
                </div>
            </div>

            <button class="btn-main" onclick="register()">
                âš¡ DEPOSIT TO UNLOCK
            </button>

            <div style="margin-top:20px; font-size:0.8rem; color:#666;">
                SECURE CONNECTION â€¢ 256-BIT ENCRYPTED
            </div>
        </div>
    </div>

    <div id="dashboard">
        <div class="dash-header">
            <span style="font-weight:bold; color:#fff;">ðŸ”´ LIVE FEED</span>
            <div id="my-tier" class="tier-badge tier-1">TIER 0 (LOCKED)</div>
        </div>
        <div id="feed"></div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        
        // 1. User Identity (Stored in Browser)
        let userId = localStorage.getItem('u_id');
        if(!userId) {
            userId = 'user_' + Math.floor(Math.random() * 1000000);
            localStorage.setItem('u_id', userId);
        }

        let currentTier = 0; 

        // 2. Register Button Logic (Generates Link)
        async function register() {
            const btn = document.querySelector('.btn-main');
            btn.innerText = "GENERATING LINK...";
            
            try {
                const res = await fetch(`/generate-link?userId=${userId}`);
                const data = await res.json();
                window.open(data.link, '_blank');
                btn.innerText = "WAITING FOR DEPOSIT...";
            } catch(e) {
                alert("Error connecting to server.");
                btn.innerText = "TRY AGAIN";
            }
        }

        // 3. Listen for Unlock/Tier Update
        socket.on('account_unlocked', (data) => { updateTier(data.tier, data.message); });
        socket.on('tier_update', (data) => { updateTier(data.tier, "Tier Updated!"); });

        function updateTier(tier, msg) {
            currentTier = tier;
            // Hide Lock Screen, Show Dashboard
            document.getElementById('lock-screen').style.display = 'none';
            document.getElementById('dashboard').style.display = 'block';
            
            // Update Badge
            const badge = document.getElementById('my-tier');
            badge.innerText = "TIER " + currentTier;
            badge.className = "tier-badge tier-" + currentTier;
            
            alert("ðŸ”“ " + msg);
        }

        // 4. Receive Signals
        socket.on('new_signal', (data) => {
            // If user is still on lock screen, do nothing visually
            const feed = document.getElementById('feed');
            const div = document.createElement('div');
            
            const isCall = data.decision.includes('CALL') || data.decision.includes('Buy');
            const isLocked = data.tierRequired > currentTier;
            
            div.className = `signal-card ${isCall ? 'call' : 'put'}`;
            
            div.innerHTML = `
                ${isLocked ? `<div class="blur-overlay"><span>ðŸ”’ VIP SIGNAL</span><small style="color:#aaa">Requires Tier ${data.tierRequired}</small></div>` : ''}
                
                <div class="signal-header">
                    <span>${data.pair}</span>
                    <span style="font-size:0.9rem; opacity:0.7">${data.timestamp}</span>
                </div>
                
                <div class="decision">${data.decision}</div>
                
                <div style="display:flex; justify-content:space-between; font-size:0.9rem; color:#ccc;">
                    <span>Entry: ${data.price}</span>
                    <span>RSI: ${data.rsi}</span>
                </div>
            `;
            
            feed.prepend(div);
            // Keep feed clean (max 10 signals)
            if(feed.children.length > 10) feed.lastChild.remove();
        });
    </script>
</body>
</html>